/* main.css */ 
@import url('https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&display=swap');
@import url('https://fonts.cdnfonts.com/css/asciid');

:root {
    container-name: root;
    --custom-guild-list-padding: 12px;
    --panel-backdrop-filter: none;
    --border-hover: var(--border-subtle);
    --gap: 12px; /* Espacement entre les panneaux */
    --divider-thickness: 4px; /* Épaisseur des séparateurs de messages non lus et bordures de messages mis en surbrillance */
    --border-thickness: 1px; /* Épaisseur des bordures autour des panneaux principaux */
    --border-hover-transition: 0.2s ease;
    --custom-guild-list-width: calc(var(--guildbar-avatar-size) + var(--custom-guild-list-padding) * 2 + var(--border-thickness) * 2);
}

body {
    container-name: body;
    --font: 'Figtree'; /* Police principale */
    --font-primary: var(--font), 'gg sans';
    --font-display: var(--font), 'gg sans';
    --font-code: var(--code-font), 'gg mono';
    --custom-chatbar: separated; /* Options : off (barre de chat par défaut), aligned (alignée avec le panneau utilisateur), separated (séparée) */
    --chatbar-height: 56px; /* Hauteur de la barre de chat (52px par défaut, 47px pour aligned, 56px pour separated) */
}

.visual-refresh {
    .bg__960e4 { background: var(--bg-base-primary); }
    
    /* Séparation des panneaux */
    .guilds_c48ade, .sidebarList_c48ade, .panels_c48ade, .chat_f75fb0 > .subtitleContainer_f75fb0,
    .chatContent_f75fb0, .container_c8ffbb, .content_f75fb0 > .membersWrap_c8ffbb,
    .container__133bf > .container__9293f, .container_f391e3 > .container__9293f,
    .homeWrapper__0920e > .container__9293f, .container__01ae2 > .container__9293f,
    .container_fb64c9 > .container__9293f, .peopleColumn__133bf, .nowPlayingColumn__133bf,
    .scroller_c880e8, .container_f391e3 > .content_f75fb0, .shop__6db1d,
    .outer_c0bea0.panel_c0bea0, .searchResultsWrap_a9e706, .container_f369db,
    .chat_fb64c9, .container_a592e1, .callContainer_cb9592, .wrapper_cb9592.sidebarOpen_cb9592 .callContainer_cb9592,
    .callContainer__722ff, .chat_f75fb0 > .header_c791b2, .chat_f75fb0 > .scrollerBase_d125d2,
    .chat_f75fb0 > .header__0b563, .chat_f75fb0 > .container__0b563 {
        background-color: var(--background-base-lower);
        border-radius: var(--radius-lg);
        border: var(--border-thickness) solid var(--border-subtle);
        backdrop-filter: var(--panel-backdrop-filter);
        box-sizing: border-box;
        transition: border-color var(--border-hover-transition);
    }

    .panels_c48ade { bottom: 0; left: 0; width: 100%; overflow: hidden; }
    .sidebar_c48ade { margin: 0 var(--gap) var(--gap) var(--gap); }
    .guilds_c48ade { margin-bottom: calc(var(--custom-app-panels-height, 0) + var(--gap)); margin-right: var(--gap); }
    .scroller_ef3116 { padding: var(--custom-guild-list-padding) 0; align-items: center; }
    .sidebarList_c48ade { margin-bottom: calc(var(--custom-app-panels-height, 0) + var(--gap)); }
    .container_c8ffbb { margin-left: var(--gap); overflow: hidden; height: auto; min-width: var(--custom-member-list-width); }
    .content_f75fb0 > .membersWrap_c8ffbb { margin-left: var(--gap); overflow: hidden; height: auto; }
    .nowPlayingColumn__133bf { margin-left: var(--gap); }
    .outer_c0bea0.panel_c0bea0 { margin-left: var(--gap); overflow: hidden; height: auto; min-width: 340px; }
    .searchResultsWrap_a9e706 { margin-left: var(--gap); }
}

/* ascii.css */
@property --ascii-titles {
    syntax: 'off | on';
    inherits: false;
    initial-value: on;
}

@container body style(--ascii-titles: on) {
    h3[data-text-variant='heading-xxl/extrabold'] {
        font-family: 'asciid';
        font-size: 50px;
        font-weight: 400;
    }
}

@property --ascii-loader {
    syntax: 'off | system24 | cats';
    inherits: false;
    initial-value: system24;
}

@container body style(--ascii-loader: system24) {
    .content_a2f514 {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }
    .content_a2f514 > .spinner_a2f514 { display: none; }
    .content_a2f514::before {
        content: '                    __                ___  __ __\A    _______  _______/ /____  ____ ___ |__ \\/ // /\A   / ___/ / / / ___/ __/ _ \\/ __ `__ \\__/ / // /_\A  (__  ) /_/ (__  ) /_/  __/ / / / / / __/__  __/\A/____/\\__, /____/\\__/\\___/_/ /_/ /_/____/ /_/   \A      /____/                                     ';
        font-size: 18px;
        font-family: monospace;
        white-space: pre;
        line-height: 1.2;
        background: linear-gradient(to right, var(--brand-360) 0%, var(--background-accent) 25%, var(--background-accent) 75%, var(--brand-360) 100%);
        background-clip: text;
        -webkit-text-fill-color: transparent;
        background-size: 200% auto;
        animation: textShine 1.5s linear infinite reverse;
    }
    .text_a2f514 { position: static; }
}

@container body style(--ascii-loader: cats) {
    .content_a2f514 {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 32px;
        position: static;
    }
    .content_a2f514 > .spinner_a2f514 { display: none; }
    .content_a2f514::before {
        content: url('https://raw.githubusercontent.com/refact0r/system24/refs/heads/main/assets/cats.gif');
        display: block;
    }
}

@keyframes textShine {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    50.0001% { background-position: -100% 50%; }
    100% { background-position: 0% 50%; }
}

/* colors.css */
@property --colors {
    syntax: 'off | on';
    inherits: false;
    initial-value: on;
}

:root {
    --text-0: var(--bg-4);
    --text-1: hsl(220, 45%, 95%);
    --text-2: hsl(220, 25%, 70%);
    --text-3: hsl(220, 20%, 60%);
    --text-4: hsl(220, 15%, 40%);
    --text-5: hsl(220, 15%, 25%);
    --bg-1: hsl(220, 15%, 20%);
    --bg-2: hsl(220, 15%, 16%);
    --bg-3: hsl(22015%, 13%);
    --bg-4: hsl(220, 15%, 10%);
    --hover: hsla(221, 19%, 40%, 0.1);
    --active: hsla(220, 19%, 40%, 0.2);
    --active-2: hsla(220, 19%, 40%, 0.3);
    --message-hover: hsla(230, 0%, 0%, 0.1);
    --accent-1: var(--blue-1);
    --accent-2: var(--blue-2);
    --accent-3: var(--blue-3);
    --accent-4: var(--blue-4);
    --accent-5: var(--blue-5);
    --accent-new: var(--blue-2);
    --mention: linear-gradient(to right, color-mix(in hsl, var(--blue-2), transparent 90%) 40%, transparent);
    --mention-hover: linear-gradient(to right, color-mix(in hsl, var(--blue-2), transparent 95%) 40%, transparent);
    --reply: linear-gradient(to right, color-mix(in hsl, var(--text-3), transparent 90%) 40%, transparent);
    --reply-hover: linear-gradient(to right, color-mix(in hsl, var(--text-3), transparent 95%) 40%, transparent);
    --online: var(--green-2);
    --dnd: var(--red-2);
    --idle: var(--yellow-2);
    --streaming: var(--purple-2);
    --offline: var(--text-4);
    --border-light: hsl(230, 20%, 40%, 0.1);
    --border: hsl(230, 20%, 40%, 0.2);
    --button-border: hsl(0, 0%, 100%, 0.1);
    --blue-1: oklch(76% 0.1 215);
    --blue-2: oklch(70% 0.1 215);
    --blue-3: oklch(64% 0.1 215);
    --blue-4: oklch(58% 0.1 215);
    --blue-5: oklch(52% 0.1 215);
    --green-1: oklch(76% 0.11 170);
    --green-2: oklch(70% 0.11 170);
    --red-1: oklch(76% 0.12 0);
    --red-2: oklch(70% 0.12 0);
    --yellow-1: oklch(80% 0.11 90);
    --yellow-2: oklch(74% 0.11 90);
    --purple-1: oklch(76% 0.11 310);
    --purple-2: oklch(70% 0.11 310);
}

@container root style(--colors: on) {
    .visual-refresh {
        --background-primary: var(--bg-4);
        --background-secondary: var(--bg-3);
        --background-tertiary: var(--bg-4);
        --bg-base-primary: var(--bg-4);
        --bg-base-secondary: var(--bg-4);
        --bg-base-tertiary: var(--bg-3);
        --text-primary: var(--text-3);
        --text-secondary: var(--text-4);
        --text-muted: var(--text-5);
        --button-filled-brand-background: var(--accent-3);
        --button-filled-brand-background-hover: var(--accent-4);
        --button-filled-brand-background-active: var(--accent-5);
        --status-online: var(--online);
        --status-dnd: var(--dnd);
        --status-idle: var(--idle);
        --status-offline: var(--offline);
        --status-streaming: var(--streaming);
    }
}

/* panel-labels.css */
body {
    --label-color: var(--text-muted); /* Couleur des étiquettes */
    --label-hover-color: var(--brand-360); /* Couleur des étiquettes au survol */
    --label-font-weight: 500; /* Poids de la police des étiquettes */
}

@property --panel-labels {
    syntax: 'off | on';
    inherits: false;
    initial-value: on;
}

@container body style(--panel-labels: on) {
    .visual-refresh {
        .guilds_c48ade, .panels_c48ade, .sidebarList_c48ade, .subtitleContainer_f75fb0,
        .messagesWrapper__36d07, .channelTextArea_f75fb0, .content_f75fb0 > .membersWrap_c8ffbb,
        .container_c8ffbb, .container__133bf > .container__9293f, .peopleColumn__133bf,
        .nowPlayingColumn__133bf, .container__01ae2 > .container__9293f, .callContainer_cb9592 {
            position: relative;
            overflow: visible;
            &::after {
                content: '';
                position: absolute;
                top: -10px;
                left: 8px;
                background-color: var(--bg-base-primary);
                padding: 0 4px;
                color: var(--label-color);
                font-weight: var(--label-font-weight);
                font-size: 16px;
                z-index: 100;
                transition: color var(--border-hover-transition);
            }
            &:hover::after { color: var(--label-hover-color); }
        }
        .guilds_c48ade::after { content: 'nav'; }
        .panels_c48ade::after { content: 'utilisateur'; }
        .sidebarList_c48ade::after { content: 'canaux'; }
        .subtitleContainer_f75fb0::after { content: 'canal'; }
        .messagesWrapper__36d07::after { content: 'chat'; }
        .channelTextArea_f75fb0::after { content: 'entrée'; }
        .container_c8ffbb::after, .content_f75fb0 > .membersWrap_c8ffbb::after { content: 'membres'; }
        .container__133bf > .container__9293f::after { content: 'amis'; }
        .peopleColumn__133bf::after { content: 'liste'; }
        .nowPlayingColumn__133bf::after { content: 'activité'; }
        .container__01ae2 > .container__9293f::after { content: 'fil'; }
        .callContainer_cb9592::after { content: 'vc'; }
    }
}

/* spotify-bar.css */
@property --custom-spotify-bar {
    syntax: 'off | on';
    inherits: false;
    initial-value: on;
}

@container body style(--custom-spotify-bar: on) {
    .visual-refresh {
        #vc-spotify-progress-bar {
            margin: 8px 0 0;
            .bar_a562c8 { height: 22px; top: 0; background-color: var(--background-surface-high); }
            .barFill_a562c8 { height: 22px; }
            .vc-spotify-time-left, .vc-spotify-time-right {
                z-index: 1;
                top: 0;
                margin-top: 0;
                mix-blend-mode: difference;
                font-size: 16px;
                line-height: 22px;
                pointer-events: none;
            }
            .vc-spotify-time-left { left: 6px; }
            .vc-spotify-time-right { right: 6px; }
            .grabber_a562c8 { visibility: hidden; }
        }
        .vc-spotify-button-row { margin-top: 8px; }
    }
}

/* unrounding.css */
@property --unrounding {
    syntax: 'off | on';
    inherits: false;
    initial-value: on;
}

@container body style(--unrounding: on) {
    *, *::before, *::after { border-radius: 0 !important; }
    .svg_cc5dd2 > mask, .svg__44b0c > rect, .svg__44b0c > circle, .svg__44b0c > g,
    .svg__44b0c rect[mask='url(#:rhi:)'], .avatar__20a53 .status_a423bd { display: none; }
    .mask__68edb > foreignObject, .svg__44b0c > foreignObject, .svg__2338f > foreignObject { mask: none; }
    .wrapper__44b0c, .container__1ce5d {
        --online-2: #40a258;
        --dnd-2: #d83a41;
        --idle-2: #cc954c;
        --offline-2: #82838b;
        --streaming-2: #9147ff;
    }
    .wrapper__44b0c:has(rect)::after, .container__1ce5d:has(.status_a423bd)::after {
        content: '';
        position: absolute;
        height: 8px;
        width: 8px;
        bottom: -4px;
        right: -4px;
        border: 2px solid var(--background-base-lower);
    }
}

/* chatbar.css */
body {
    --chatbar-height: 47px; /* Hauteur de la barre de chat */
    --chatbar-padding: 8px; /* Remplissage de la barre de chat */
    --custom-channel-textarea-text-area-height: var(--chatbar-height);
}

@property --custom-chatbar {
    syntax: 'off | aligned | separated';
    inherits: false;
    initial-value: aligned;
}

@container body style(--custom-chatbar: aligned) {
    .visual-refresh {
        .form_f75fb0 {
            margin: 0 var(--chatbar-padding) var(--chatbar-padding);
            padding: 0;
            --chatbar-border-color: var(--border-faint);
        }
        .channelTextArea_f75fb0 {
            margin: 0;
            border-color: var(--chatbar-border-color);
            transition: none;
        }
        .base_b88801 {
            top: -24px;
            left: 0;
            right: 0;
            background-color: var(--chat-background-default);
            padding: 0 8px;
            border-radius: var(--radius-md) var(--radius-md) 0 0;
            border: 1px solid var(--chatbar-border-color);
            border-bottom: none;
            transition: none;
            box-sizing: border-box;
        }
    }
}

@container body style(--custom-chatbar: separated) {
    .visual-refresh {
        .chatContent_f75fb0 { background: none; border-radius: 0; border: none; backdrop-filter: none; }
        .messagesWrapper__36d07 {
            background-color: var(--background-base-lower);
            border-radius: var(--radius-lg);
            border: var(--border-thickness) solid var(--border-subtle);
            backdrop-filter: var(--panel-backdrop-filter);
            transition: border-color var(--border-hover-transition);
            &:hover { border-color: var(--border-hover); }
        }
        .form_f75fb0 {
            display: flex;
            flex-direction: column;
            padding: 0;
            width: 100%;
            margin-top: 0;
        }
        .channelTextArea_f75fb0 {
            margin: 0;
            background-color: var(--background-base-lower);
            border-radius: var(--radius-lg);
            border: var(--border-thickness) solid var(--border-subtle);
            backdrop-filter: var(--panel-backdrop-filter);
            transition: border-color var(--border-hover-transition);
            &:hover { border-color: var(--border-hover); }
        }
    }
}
